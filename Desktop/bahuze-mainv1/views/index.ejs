<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bahuze</title>
    <!-- Font Awesome Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="icon" href="/images/logo.png">
</head>
<%- include('partials/spinner')%>
<body class="spinner-container">
    <!-- Header Section -->
    <%- include('partials2/header') %>

    <!-- Search Section -->
    <%- include('partials2/section') %>

    <!-- Featured Properties Section -->
    <section class="featured-properties">
        <h2>Real Estate Properties</h2>
        <div class="tabs">
            <button class="tab-button <%= !filter ? 'active' : '' %>" onclick="filterProperties('')">Latest</button>
            <button class="tab-button <%= filter === 'Sale' ? 'active' : '' %>" onclick="filterProperties('Sale')">Sale</button>
            <button class="tab-button <%= filter === 'Rent' ? 'active' : '' %>" onclick="filterProperties('Rent')">Rent</button>
        </div>
    
        <script>
            function filterProperties(type) {
                window.location.href = type ? `/?type=${type}` : "/";
            }
        </script>
    
        <% if (properties.length > 0) { %>
            <div class="property-grid">
                <% properties.forEach(property => { %>
                    <div class="property-card">
                        <a href="#"><img src="<%= property.images[0] %>" alt="Property Image"></a>
                        <div class="property-info">
                            <a href="#"><h5 class="text-warning"> RWF<%= property.price %> / <span class="badge text-bg-primary"><%= property.housetype %></span></h5></a>
                            <p><%= property.location %></p>
                            <span><%= property.category %> - <%= property.size %>km/square</span>
                            <% if (property.type === 'Rent') { %>
                                <div class="bg-warning fw-bolder p-3 d-flex justify-content-center align-items-center" style="height: 53px; width: 53px; text-align: center; clip-path: polygon(50% 0%, 63% 30%, 98% 35%, 76% 57%, 79% 91%, 50% 74%, 21% 91%, 25% 58%, 2% 35%, 33% 32%); font-size: 9px;">
                                    Rent
                                </div>
                            <% } else if (property.type === 'Sale') { %>
                                <div class="bg-success fw-bolder p-3 d-flex justify-content-center align-items-center" style="height: 53px; width: 53px; text-align: center; clip-path: polygon(50% 0%, 63% 30%, 98% 35%, 76% 57%, 79% 91%, 50% 74%, 21% 91%, 25% 58%, 2% 35%, 33% 32%); font-size: 9px;">
                                    Sale
                                </div>
                            <% } %>
                        </div>
                        <div class="p-3">
                            <!-- Buttons -->
                            <a href="#" class="text-decoration-none btn btn-warning rounded-5" data-bs-toggle="modal" data-bs-target="#bookModal">Book</a>
                            <a href="#" class="text-decoration-none btn btn-danger rounded-5" data-bs-toggle="modal" data-bs-target="#paymentModal">Buy</a>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <div class="property-grid">
                <div class="property-card">
                    <p>No properties available.</p>
                </div>
            </div>
        <% } %>
    
        <!-- Pagination -->
        <% if (totalPages > 1) { %>
            <nav aria-label="Page navigation">
                <div class="d-flex justify-content-center p-3">
                    <ul class="pagination">
                        <% for (let i = 1; i <= totalPages; i++) { %>
                            <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                                <a class="page-link" href="/?page=<%= i %>"><%= i %></a>
                            </li>
                        <% } %>
                    </ul>
                </div>
            </nav>
        <% } %>
    </section>

    <!-- Booking Modal -->
    <div class="modal fade" id="bookModal" tabindex="-1" aria-labelledby="bookModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Book Now</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="bookingForm">
                        <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" required>
                        </div>
                        <button type="button" class="btn btn-primary" id="continueBooking">Continue</button>
                    </form>

                    <div id="paymentReminder" class="mt-3 d-none">
                        <p class="text-danger">Before booking, you must pay at least half.</p>
                        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#paymentModal" data-bs-dismiss="modal">Proceed to Payment</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Select your payment method:</p>
                    <button class="btn btn-primary">Pay Now</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Blue Background Section -->
    <section class="blue-section">
        <div class="content-wrapper">
            <!-- Column 1: Buy - Sell - Rent -->
            <div class="info-box">
                <img src="/assets/img/icon1.png" alt="House Icon" class="icon">
                <a href="" style="text-decoration: none;"><h3>Buy - Sell - Rent</h3></a>
                <p>
                    Have you ever been stressed by sourcing a perfect property for you? Have you ever been disappointed because of being taken to properties that are far from your criteria? Do you really need professional real estate broker to assist you? If you really care about your time, our team at abahuza.com is passionate to locate and negotiate the acquisition of suitable property for you. Finding the perfect property, whether it's Land, Residential, office or other commercial...
                </p>
            </div>
    
            <!-- Column 2: Services -->
            <div class="info-box">
                <img src="/assets/img/icon2.png" alt="Services Icon" class="icon">
                <a href="/serviceTeams" style="text-decoration: none;"><h3>Services</h3></a>
                <ul>
                    <li>Property Management</li>
                    <li>Property Valuation</li>
                    <li>Construction project study & Supervision</li>
                    <li>Building renovation and finishing</li>
                    <li>Aluminum and Gypsum partitioning</li>
                </ul>
                <p>
                    If you are interested in one of our services, just contact us. Please Call or WhatsApp us on +250788853243. You can also drop by to our Office in Kigali City Center, Kacyiru, ST 567St Kigali.
                </p>
            </div>
    
            <!-- Column 3: Spirit at Bahuze -->
            <div class="info-box">
                <img src="/assets/img/icon3.png" alt="Spirit Icon" class="icon">
                <a href="" style="text-decoration: none;"><h3>Spirit at Bahuze.com</h3></a>
                <p>
                    To be honest, we do not settle for anything less than Perfection, however there is a long path. Now we’re not good enough but we learn how to be the best in what we do and we admit with self-honesty when we’re wrong with courage to change. We don't value how long you stay at work or how hard you work; we care about accomplishing great work. It is not just working or getting the job with us...
                </p>
            </div>
        </div>
    </section>
    
    
    <!-- Partners Section -->
    <section class="partners">
        <h2>Our Partners</h2>
        <img src="/assets/img/partner.png" alt="Partner Logo">
    </section>
    <!-- Footer Section -->
    <%- include('partials2/footer') %>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById("continueBooking").addEventListener("click", function() {
            document.getElementById("paymentReminder").classList.remove("d-none");
        });
    </script>
    <script src="/js/index.js"></script>
</body>
</html>